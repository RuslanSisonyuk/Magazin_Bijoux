@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@model Magazin_Bijoux.Models.Product


@{
    ViewData["Title"] = Html.DisplayFor(model => model.name);

    //float totalPrice = ViewBag.quantity * Model.price;
}
<div style="display:flex; flex-direction:row; justify-content: center; margin-top:30px; margin-bottom:30px;">
    <div>
        <img src=@String.Format("/Product_img580x420/{0}_{1}.png", Model.imageURL, "1") />
    </div>

    <div style="margin-left: 30px;">
        <div>
            <p>
                <h4>
                    @Html.DisplayFor(model => model.name)
                </h4>
                $@Html.DisplayFor(model => model.price)
            </p>
            <p>
                @Html.DisplayFor(model => model.details)
            </p>
            <p>
                Taile:  @Html.DisplayFor(model => model.size)<br />
                Couleur: @Html.DisplayFor(model => model.color)<br />
            </p>
        </div>
        <div style="display:flex; flex-direction:row;">
            <p>
            @using (Html.BeginForm())
            {

            }
                    Cantitate
                <a asp-controller="Products" asp-action="Decrement">-</a>
                1
                <a asp-controller="Products" asp-action="Increment" asp-route-id="@Model.id">+</a>
            </p>
        </div>
        <div>
            <p>
                Total:
                $total
            </p>
        </div>
        <div>
            @if (SignInManager.IsSignedIn(User))
            {
                <form asp-controller="CartItems" asp-action="AddToCartAndReturn" asp-route-id="@Model.id">
                    <input type="hidden" name="action" value="Product" />
                    <input type="hidden" name="controller" value="Products" />
                    <input type="hidden" name="quantity" value=1 />
                    <input type="hidden" name="hasParameter" value="true" />
                    <div class="form-group">
                        <input type="submit" value="Add to cart" class="card__button btn btn-primary" />
                    </div>
                </form>
            }
            else
            {
                <div class="form-group">
                    <a class="card__button btn btn-primary" asp-area="Identity" asp-page="/Account/Login">Add to Cart</a>
                </div>
            }
        </div>
    </div>
</div>
@section Scripts{ 
<script>
    $(document).ready(function () {
        $.ajax({
            url: '/ProductsController/GetTime',
            type: 'GET',
            success: function (response) {
                // Process the response
                console.log('Current time: ' + response);
            },
            error: function (xhr, status, error) {
                // Handle the error
                console.log('Error: ' + error);
            }
        });
    });
</script>
    }